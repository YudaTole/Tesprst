<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OCC Video Downloader</title>
  <meta name="description" content="Pemutar Google Drive + shortcut downloader TikTok / Instagram / Facebook. Dark mode, responsive, sticky footer." />
  <style>
    :root{
      --bg:#07090c;--card:#0f1720;--muted:#93a6bf;--text:#e6eef9;--accent:#3fb0ff;--accent2:#22d3ee;--glass:rgba(255,255,255,0.03);
      --radius:12px;--mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", monospace;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:var(--text);background:linear-gradient(180deg,#05060a 0%, #0b1220 100%);-webkit-font-smoothing:antialiased}

    /* Layout */
    .wrap{max-width:980px;margin:20px auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;box-shadow:0 8px 28px rgba(34,115,255,0.12)}
    .logo strong{font-size:20px}
    .title{font-weight:700;font-size:1rem}
    .subtitle{color:var(--muted);font-size:0.85rem}

    .card{background:var(--card);border-radius:var(--radius);padding:14px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(2,6,23,0.6)}

    /* Tabs */
    .tabs{display:flex;gap:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:8px;border-radius:12px;margin-bottom:12px}
    .tab{flex:1;display:flex;align-items:center;gap:8px;padding:10px;border-radius:10px;cursor:pointer;justify-content:center;font-weight:600;color:var(--muted);user-select:none;border:1px solid transparent;transition:all .18s}
    .tab.active{background:linear-gradient(90deg, rgba(63,176,255,0.12), rgba(34,211,238,0.06));color:var(--text);box-shadow:0 6px 18px rgba(34,115,255,0.06);border-color:rgba(63,176,255,0.12);transform:translateY(-2px)}
    .tab .icon{font-size:18px}

    /* Content area */
    .content{margin-top:10px}
    .pane{display:none;animation:fadeIn .22s ease both}
    .pane.active{display:block}

    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    /* Drive player */
    .player-wrap{position:relative;padding-top:56.25%;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#000}
    .player-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0}

    .form-row{display:flex;gap:8px;align-items:center}
    .input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:linear-gradient(180deg,#08101a,#07101a);color:var(--text)}
    .btn{appearance:none;border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700;display:inline-flex;align-items:center;gap:8px}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#032029;box-shadow:0 8px 20px rgba(34,115,255,0.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)}
    .muted{color:var(--muted);font-size:0.9rem}

    .dl-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}

    /* Small screens */
    @media(max-width:680px){
      .tabs{flex-direction:row;gap:6px;overflow:auto;padding:6px}
      .tab{min-width:110px;flex:0 0 auto;padding:10px}
      .dl-grid{grid-template-columns:1fr}
      .wrap{margin:12px;padding:12px}
    }

    /* Footer sticky */
    .footer{position:fixed;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;padding:10px;background:linear-gradient(180deg, rgba(2,6,23,0.3), rgba(2,6,23,0.65));backdrop-filter:blur(6px);border-top:1px solid rgba(255,255,255,0.02);}
    .footer small{color:var(--muted)}

    /* helper */
    .chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);background:var(--glass);display:inline-flex;align-items:center;gap:8px}
    .center{display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><strong>O</strong></div>
        <div>
          <div class="title">OCC Video Downloader</div>
          <div class="subtitle">Google Drive â€¢ TikTok â€¢ Instagram â€¢ Facebook â€” Dark mode responsive</div>
        </div>
      </div>
      <div class="chip">Tip: gunakan link share publik untuk Drive</div>
    </header>

    <div class="card">
      <div class="tabs" role="tablist" aria-label="Platform Tabs">
        <div class="tab active" data-target="drive" role="tab" aria-selected="true"><span class="icon">ðŸŽ¬</span><span>Drive</span></div>
        <div class="tab" data-target="tiktok" role="tab" aria-selected="false"><span class="icon">ðŸŽµ</span><span>TikTok</span></div>
        <div class="tab" data-target="instagram" role="tab" aria-selected="false"><span class="icon">ðŸ“¸</span><span>Instagram</span></div>
        <div class="tab" data-target="facebook" role="tab" aria-selected="false"><span class="icon">ðŸ“˜</span><span>Facebook</span></div>
      </div>

      <div class="content">
        <!-- DRIVE -->
        <section id="drive" class="pane active" aria-labelledby="tab-drive">
          <div class="muted">Masukkan link Google Drive (share atau FILE_ID). Klik "Tampilkan" untuk memutar. Pastikan file di-set "Anyone with the link".</div>
          <div style="height:10px"></div>
          <div class="form-row">
            <input id="driveInput" class="input" placeholder="https://drive.google.com/file/d/FILE_ID/view?usp=sharing" />
            <button id="loadBtn" class="btn primary">Tampilkan</button>
            <button id="copyDrive" class="btn ghost">Salin</button>
          </div>

          <div style="height:12px"></div>
          <div id="playerWrap" class="player-wrap" hidden>
            <iframe id="player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>
          </div>

          <div id="dlDriveRow" style="margin-top:10px;display:none;gap:8px;align-items:center;">
            <div class="muted">Direct download:</div>
            <a id="dlDrive" class="chip" target="_blank" rel="noopener">Buka tautan unduhan</a>
          </div>
        </section>

        <!-- TIKTOK -->
        <section id="tiktok" class="pane" aria-labelledby="tab-tiktok">
          <div class="muted">Masukkan link video TikTok. Klik "Unduh" untuk membuka halaman downloader.</div>
          <div style="height:10px"></div>
          <div class="form-row">
            <input id="ttInput" class="input" placeholder="https://www.tiktok.com/@user/video/123..." />
            <button id="ttBtn" class="btn primary">Unduh</button>
            <button id="ttCopy" class="btn ghost">Salin</button>
          </div>
          <div style="height:10px"></div>
          <div class="dl-grid">
            <a id="ttSss" class="btn ghost center" target="_blank" rel="noopener">Buka ssstik.io</a>
            <a id="ttSaveFrom" class="btn ghost center" target="_blank" rel="noopener">Buka savefrom</a>
          </div>
        </section>

        <!-- INSTAGRAM -->
        <section id="instagram" class="pane" aria-labelledby="tab-instagram">
          <div class="muted">Masukkan link Instagram (post atau reel). Klik "Unduh" untuk membuka halaman downloader.</div>
          <div style="height:10px"></div>
          <div class="form-row">
            <input id="igInput" class="input" placeholder="https://www.instagram.com/p/ABC123..." />
            <button id="igBtn" class="btn primary">Unduh</button>
            <button id="igCopy" class="btn ghost">Salin</button>
          </div>
          <div style="height:10px"></div>
          <div class="dl-grid">
            <a id="igSnap" class="btn ghost center" target="_blank" rel="noopener">Buka snapinsta.app</a>
            <a id="igInfl" class="btn ghost center" target="_blank" rel="noopener">Buka inflact</a>
          </div>
        </section>

        <!-- FACEBOOK -->
        <section id="facebook" class="pane" aria-labelledby="tab-facebook">
          <div class="muted">Masukkan link Facebook (post/video). Klik "Unduh" untuk membuka halaman downloader.</div>
          <div style="height:10px"></div>
          <div class="form-row">
            <input id="fbInput" class="input" placeholder="https://www.facebook.com/.../videos/123..." />
            <button id="fbBtn" class="btn primary">Unduh</button>
            <button id="fbCopy" class="btn ghost">Salin</button>
          </div>
          <div style="height:10px"></div>
          <div class="dl-grid">
            <a id="fbSnap" class="btn ghost center" target="_blank" rel="noopener">Buka snapsave.app</a>
            <a id="fbDownvids" class="btn ghost center" target="_blank" rel="noopener">Buka downvids</a>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div class="footer">
    <small>ðŸ“© Contact: omyudz05@gmail.com</small>
  </div>

  <script>
    // --- Tabs ---
    const tabs = document.querySelectorAll('.tab');
    const panes = document.querySelectorAll('.pane');
    tabs.forEach(t=> t.addEventListener('click', ()=>{
      tabs.forEach(x=> x.classList.remove('active'));
      t.classList.add('active');
      const target = t.dataset.target;
      panes.forEach(p=> p.classList.toggle('active', p.id===target));
      // set aria
      tabs.forEach(x=> x.setAttribute('aria-selected', x===t));
    }));

    // --- Helpers ---
    const qs = new URLSearchParams(location.search);
    function extractDriveId(input){
      if(!input) return '';
      const s = input.trim();
      let m = s.match(/\/file\/d\/([a-zA-Z0-9_-]{10,})/);
      if(m) return m[1];
      m = s.match(/[?&]id=([a-zA-Z0-9_-]{10,})/);
      if(m) return m[1];
      if(/^[a-zA-Z0-9_-]{20,}$/.test(s)) return s;
      return '';
    }
    function buildPreviewUrl(id){return `https://drive.google.com/file/d/${id}/preview`;}
    function buildDownloadUrl(id){return `https://drive.google.com/uc?export=download&id=${id}`;}

    // --- DRIVE ---
    const driveInput = document.getElementById('driveInput');
    const loadBtn = document.getElementById('loadBtn');
    const copyDrive = document.getElementById('copyDrive');
    const playerWrap = document.getElementById('playerWrap');
    const player = document.getElementById('player');
    const dlDrive = document.getElementById('dlDrive');
    const dlDriveRow = document.getElementById('dlDriveRow');

    if(qs.get('drive')) driveInput.value = decodeURIComponent(qs.get('drive'));
    loadBtn.addEventListener('click', ()=>{
      const id = extractDriveId(driveInput.value);
      if(!id){alert('Gagal membaca FILE_ID dari link Drive. Pastikan format benar.');return}
      player.src = buildPreviewUrl(id);
      playerWrap.hidden = false;
      dlDrive.href = buildDownloadUrl(id);
      dlDriveRow.style.display = 'flex';
    });
    copyDrive.addEventListener('click', ()=> navigator.clipboard.writeText(driveInput.value || ''));

    // --- TIKTOK ---
    const ttInput = document.getElementById('ttInput');
    const ttBtn = document.getElementById('ttBtn');
    const ttCopy = document.getElementById('ttCopy');
    const ttSss = document.getElementById('ttSss');
    const ttSaveFrom = document.getElementById('ttSaveFrom');
    if(qs.get('tiktok')) ttInput.value = decodeURIComponent(qs.get('tiktok'));
    function updateTtLinks(){
      const l = encodeURIComponent(ttInput.value.trim());
      ttSss.href = l? `https://ssstik.io/en?url=${l}` : '#';
      ttSaveFrom.href = l? `https://en.savefrom.net/1-${l}` : '#';
    }
    ttBtn.addEventListener('click', ()=>{ updateTtLinks(); if(ttSss.href!=='#') window.open(ttSss.href,'_blank') });
    ttInput.addEventListener('input', updateTtLinks);
    ttCopy.addEventListener('click', ()=> navigator.clipboard.writeText(ttInput.value || ''));
    updateTtLinks();

    // --- INSTAGRAM ---
    const igInput = document.getElementById('igInput');
    const igBtn = document.getElementById('igBtn');
    const igCopy = document.getElementById('igCopy');
    const igSnap = document.getElementById('igSnap');
    const igInfl = document.getElementById('igInfl');
    if(qs.get('instagram')) igInput.value = decodeURIComponent(qs.get('instagram'));
    function updateIgLinks(){
      const l = encodeURIComponent(igInput.value.trim());
      igSnap.href = l? `https://snapinsta.app/?url=${l}` : '#';
      igInfl.href = l? `https://inflact.com/downloader/instagram?link=${l}` : '#';
    }
    igBtn.addEventListener('click', ()=>{ updateIgLinks(); if(igSnap.href!=='#') window.open(igSnap.href,'_blank') });
    igInput.addEventListener('input', updateIgLinks);
    igCopy.addEventListener('click', ()=> navigator.clipboard.writeText(igInput.value || ''));
    updateIgLinks();

    // --- FACEBOOK ---
    const fbInput = document.getElementById('fbInput');
    const fbBtn = document.getElementById('fbBtn');
    const fbCopy = document.getElementById('fbCopy');
    const fbSnap = document.getElementById('fbSnap');
    const fbDownvids = document.getElementById('fbDownvids');
    if(qs.get('facebook')) fbInput.value = decodeURIComponent(qs.get('facebook'));
    function updateFbLinks(){
      const l = encodeURIComponent(fbInput.value.trim());
      fbSnap.href = l? `https://snapsave.app/?url=${l}` : '#';
      fbDownvids.href = l? `https://downvids.net/?url=${l}` : '#';
    }
    fbBtn.addEventListener('click', ()=>{ updateFbLinks(); if(fbSnap.href!=='#') window.open(fbSnap.href,'_blank') });
    fbInput.addEventListener('input', updateFbLinks);
    fbCopy.addEventListener('click', ()=> navigator.clipboard.writeText(fbInput.value || ''));
    updateFbLinks();

    // --- Auto open tab if query param provided ---
    const openTab = qs.get('tab');
    if(openTab){
      const el = document.querySelector(`.tab[data-target="${openTab}"]`);
      if(el) el.click();
    }

    // Accessibility: allow Enter to submit in inputs
    ;['driveInput','ttInput','igInput','fbInput'].forEach(id=>{
      const el = document.getElementById(id);
      if(!el) return;
      el.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); const btn = el.nextElementSibling; if(btn && btn.click) btn.click(); } });
    });
  </script>
</body>
</html>
